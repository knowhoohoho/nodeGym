<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <title>Document</title>
</head>

<body>
    <div class="headers">
        <%- include('./Common/headers.ejs') %>
    </div>
    
    <main class="mt-5">
        <div class="container">
            <h2 class="text-center">트레이너 등록</h2>
            <div class="mb-3 row mt-3">
                <label class="col-md-3 col-form-label">트레이너 활동명</label>
                <div class="col-md-9">
                    <input type="text" class="form-control" placeholder="이름" name="nickname" id="nickname" aria-describedby="basic-addon1">
                </div>
            </div>

            <div class="mb-3 row mt-3">
                <label class="col-md-3 col-form-label">경력</label>
                <div class="col-md-9">
                    <input type="number" class="form-control" placeholder="경력" name="career" id="annual" aria-describedby="basic-addon1">
                </div>
            </div>
            <div class="mb-3 row mt-3">
                <label class="col-md-3 col-form-label">자격증</label>
                <div class="col-md-9">
                    <input type="text" class="form-control" placeholder="자격증" name="certificate" id="certificate" aria-describedby="basic-addon1">
                </div>
            </div>
            <div class="mb-3 row mt-3">
                <label class="col-md-3 col-form-label">학교</label>
                <div class="col-md-9">
                    <input type="text" class="form-control" placeholder="학교" name="school" id="school" aria-describedby="basic-addon1">
                </div>
            </div>
            <div class="mb-3  row">
                <label class="col-md-3 col-form-label">수상경력</label>
                <div class="col-md-9">
                    <input type="text" class="form-control" placeholder="수상경력" name="prize" id="prize" >
                </div>
            </div>
            <div class="mb-3  row">
                <label class="col-md-3 col-form-label">한 줄평</label>
                <div class="col-md-9">
                    <input type="text" class="form-control" placeholder="수상경력" name="say" id="say" >
                </div>
            </div>
            <div class="mb-3 row mt-3">
                <label class="col-md-3 col-form-label">짧은 소개</label>
                <div class="col-md-9">
                    <input type="text" class="form-control" placeholder="짧은 소개" name="today" id="today" aria-describedby="basic-addon1">
                </div>
            </div>
            <div class="mb-3 row">
                <div class="col-6 d-grid p-1">
                    <button type="button" class="btn btn-lg btn-dark" onclick="history.back() ">취소하기</button>
                </div>
                <div class="col-6 d-grid p-1">
                    <button type="submit" class="btn btn-lg btn-danger" onclick="userPage()">저장하기</button>
                </div>
            </div>

        </div>
    </main>


        <script>

         async function userPage() {    
            const trainerUrl = 'http://localhost:4000/auth/trainers'
            const  nickname = document.getElementById('nickname').value,
                   career =  document.getElementById('annual').value,
                   certificate = document.getElementById('certificate').value,
                   school = document.getElementById('school').value,
                   prize = document.getElementById('prize').value,
                   today = document.getElementById('today').value,
                   say = document.getElementById('say').value,
                   image1 = document.querySelector('image2');
                   console.log(image1)
                   

          const response = await axios.post(trainerUrl, {nickname, career, certificate, school, prize, today, say,image1})
          console.log(response)
            if(response.data.success === false) {
                alert(response.data.message);
               return window.location.assign('/trainers')
            }
            if(response.data.success === true) {
                alert(response.data.message);
              return window.location.assign('/photo')
            }
              
            }
        </script>




    <script type="text/javascript" charset="utf-8"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
</body>

</html>